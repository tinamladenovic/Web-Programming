{"ast":null,"code":"import axios from 'axios';\nimport { ref, onMounted } from 'vue';\nexport default {\n  setup() {\n    const user = ref({\n      id: '',\n      username: '',\n      password: '',\n      firstName: '',\n      lastName: '',\n      gender: '',\n      birthDate: '',\n      role: '',\n      customerType: '',\n      earnedPoints: 0,\n      shoppingCart: ''\n    });\n    const fetchUserProfile = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/currentUser', {\n          withCredentials: true\n        });\n        user.value = response.data;\n      } catch (error) {\n        console.error('Error fetching user profile:', error);\n      }\n    };\n    const updateProfile = async () => {\n      if (!user.value.username || !user.value.firstName || !user.value.lastName) {\n        alert('Username, First Name, and Last Name are required.');\n        return;\n      }\n      try {\n        const response = await axios.put('http://localhost:8080/WebShopAppREST/rest/profile', user.value, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        alert('Profile updated successfully!');\n        console.log(response.data); // Logujte odgovor za debugging\n      } catch (error) {\n        console.error('Error updating profile:', error.response ? error.response.data : error.message);\n        alert('Failed to update profile. Please try again.');\n      }\n    };\n    onMounted(() => {\n      fetchUserProfile();\n    });\n    return {\n      user,\n      updateProfile\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","onMounted","setup","user","id","username","password","firstName","lastName","gender","birthDate","role","customerType","earnedPoints","shoppingCart","fetchUserProfile","response","get","withCredentials","value","data","error","console","updateProfile","alert","put","headers","log","message"],"sources":["C:\\Users\\PC\\eclipse-workspace\\apache-tomcat-9.0.89\\apache-tomcat-9.0.89\\webapps\\chocolate-factory-2\\Kostur\\Frontend\\front-app\\src\\views\\UserProfile.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-profile\">\r\n    <h2>User Profile</h2>\r\n    <form @submit.prevent=\"updateProfile\">\r\n      <div class=\"form-group\">\r\n        <label for=\"username\">Username:</label>\r\n        <input v-model=\"user.username\" id=\"username\" name=\"username\" class=\"form-control\" autocomplete=\"username\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"firstName\">First Name:</label>\r\n        <input v-model=\"user.firstName\" id=\"firstName\" name=\"firstName\" class=\"form-control\" autocomplete=\"given-name\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"lastName\">Last Name:</label>\r\n        <input v-model=\"user.lastName\" id=\"lastName\" name=\"lastName\" class=\"form-control\" autocomplete=\"family-name\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">Password:</label>\r\n        <input v-model=\"user.password\" id=\"password\" name=\"password\" class=\"form-control\" autocomplete=\"new-password\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"gender\">Gender:</label>\r\n        <select v-model=\"user.gender\" id=\"gender\" name=\"gender\" class=\"form-control\" autocomplete=\"sex\" required>\r\n          <option value=\"MALE\">Male</option>\r\n          <option value=\"FEMALE\">Female</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"birthDate\">Birth Date:</label>\r\n        <input v-model=\"user.birthDate\" id=\"birthDate\" name=\"birthDate\" type=\"date\" class=\"form-control\" autocomplete=\"bday\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"role\">Role:</label>\r\n        <p id=\"role\">{{ user.role }}</p>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"customerType\">Customer Type:</label>\r\n        <p id=\"customerType\">{{ user.customerType }}</p>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"earnedPoints\">Earned Points:</label>\r\n        <p id=\"earnedPoints\">{{ user.earnedPoints }}</p>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"shoppingCart\">Shopping Cart:</label>\r\n        <p id=\"shoppingCart\">{{ user.shoppingCart }}</p>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn\">Update Profile</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ref, onMounted } from 'vue';\r\n\r\nexport default {\r\n  setup() {\r\n    const user = ref({\r\n      id: '',\r\n      username: '',\r\n      password: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      gender: '',\r\n      birthDate: '',\r\n      role: '',\r\n      customerType: '',\r\n      earnedPoints: 0,\r\n      shoppingCart: ''\r\n    });\r\n\r\n    const fetchUserProfile = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/currentUser', {\r\n          withCredentials: true\r\n        });\r\n        user.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching user profile:', error);\r\n      }\r\n    };\r\n\r\n    const updateProfile = async () => {\r\n  if (!user.value.username || !user.value.firstName || !user.value.lastName) {\r\n    alert('Username, First Name, and Last Name are required.');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const response = await axios.put('http://localhost:8080/WebShopAppREST/rest/profile', user.value, {\r\n      withCredentials: true,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    alert('Profile updated successfully!');\r\n    console.log(response.data); // Logujte odgovor za debugging\r\n  } catch (error) {\r\n    console.error('Error updating profile:', error.response ? error.response.data : error.message);\r\n    alert('Failed to update profile. Please try again.');\r\n  }\r\n\r\n\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchUserProfile();\r\n    });\r\n\r\n    return {\r\n      user,\r\n      updateProfile\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-profile {\r\n  max-width: 600px;\r\n  margin: 40px auto;\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  font-weight: 600;\r\n  margin-bottom: 5px;\r\n  color: #555;\r\n}\r\n\r\ninput[type=\"text\"],\r\ninput[type=\"password\"],\r\ninput[type=\"date\"],\r\nselect {\r\n  width: 100%;\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  border-radius: 5px;\r\n  border: 1px solid #ddd;\r\n  box-sizing: border-box;\r\n  background-color: #fff;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\ninput[type=\"text\"]:focus,\r\ninput[type=\"password\"]:focus,\r\ninput[type=\"date\"]:focus,\r\nselect:focus {\r\n  border-color: #007bff;\r\n  outline: none;\r\n}\r\n\r\np {\r\n  padding: 10px;\r\n  background-color: #f8f8f8;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  color: #333;\r\n}\r\n\r\nbutton.btn {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 12px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  font-size: 16px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\nbutton.btn:hover {\r\n  background-color: #0056b3;\r\n}\r\n</style>\r\n"],"mappings":"AAqDA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAK;AAEpC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,IAAG,GAAIH,GAAG,CAAC;MACfI,EAAE,EAAE,EAAE;MACNC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,SAAS,EAAE,EAAE;MACbC,IAAI,EAAE,EAAE;MACRC,YAAY,EAAE,EAAE;MAChBC,YAAY,EAAE,CAAC;MACfC,YAAY,EAAE;IAChB,CAAC,CAAC;IAEF,MAAMC,gBAAe,GAAI,MAAAA,CAAA,KAAY;MACnC,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMjB,KAAK,CAACkB,GAAG,CAAC,uDAAuD,EAAE;UACxFC,eAAe,EAAE;QACnB,CAAC,CAAC;QACFf,IAAI,CAACgB,KAAI,GAAIH,QAAQ,CAACI,IAAI;MAC5B,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IAED,MAAME,aAAY,GAAI,MAAAA,CAAA,KAAY;MACpC,IAAI,CAACpB,IAAI,CAACgB,KAAK,CAACd,QAAO,IAAK,CAACF,IAAI,CAACgB,KAAK,CAACZ,SAAQ,IAAK,CAACJ,IAAI,CAACgB,KAAK,CAACX,QAAQ,EAAE;QACzEgB,KAAK,CAAC,mDAAmD,CAAC;QAC1D;MACF;MAEA,IAAI;QACF,MAAMR,QAAO,GAAI,MAAMjB,KAAK,CAAC0B,GAAG,CAAC,mDAAmD,EAAEtB,IAAI,CAACgB,KAAK,EAAE;UAChGD,eAAe,EAAE,IAAI;UACrBQ,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACFF,KAAK,CAAC,+BAA+B,CAAC;QACtCF,OAAO,CAACK,GAAG,CAACX,QAAQ,CAACI,IAAI,CAAC,EAAE;MAC9B,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAACL,QAAO,GAAIK,KAAK,CAACL,QAAQ,CAACI,IAAG,GAAIC,KAAK,CAACO,OAAO,CAAC;QAC9FJ,KAAK,CAAC,6CAA6C,CAAC;MACtD;IAGE,CAAC;IAEDvB,SAAS,CAAC,MAAM;MACdc,gBAAgB,CAAC,CAAC;IACpB,CAAC,CAAC;IAEF,OAAO;MACLZ,IAAI;MACJoB;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}