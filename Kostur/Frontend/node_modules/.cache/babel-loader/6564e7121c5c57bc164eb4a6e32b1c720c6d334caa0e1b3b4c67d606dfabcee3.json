{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'AddFactory',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const factory = ref({\n      name: '',\n      location: {\n        address: '',\n        latitude: null,\n        longitude: null\n      },\n      openingTime: '',\n      closingTime: '',\n      logo: '',\n      managerId: null,\n      chocolates: [],\n      rating: 0,\n      status: 'OPEN'\n    });\n    const locations = ref([]);\n    const selectedLocation = ref(null);\n    const availableManagers = ref([]);\n    const loadLocations = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/locations');\n        const locationsData = response.data;\n        locations.value = Object.values(locationsData);\n      } catch (error) {\n        console.error('Error loading locations:', error);\n        locations.value = [];\n      }\n    };\n    const loadAvailableManagers = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/users/managers');\n        availableManagers.value = response.data.filter(manager => !manager.assignedFactoryId || manager.assignedFactoryId === '');\n      } catch (error) {\n        console.error('Error loading managers:', error);\n      }\n    };\n    const updateFactoryLocation = () => {\n      const location = locations.value.find(loc => loc.locationId === selectedLocation.value);\n      if (location) {\n        factory.value.location = location;\n      }\n    };\n    const submitFactory = async () => {\n      try {\n        const endpoint = 'http://localhost:8080/WebShopAppREST/rest/chocolateFactoryObjects';\n        const response = await axios.post(endpoint, factory.value, {\n          withCredentials: true\n        });\n        console.log('Factory created:', response.data);\n        router.push('/');\n      } catch (error) {\n        console.error('Error creating factory:', error.message);\n      }\n    };\n    const navigateToAddLocation = () => {\n      router.push('/addlocation');\n    };\n    const navigateToAddManager = () => {\n      router.push('/addmanager');\n    };\n    onMounted(() => {\n      loadLocations();\n      loadAvailableManagers();\n    });\n    const __returned__ = {\n      router,\n      factory,\n      locations,\n      selectedLocation,\n      availableManagers,\n      loadLocations,\n      loadAvailableManagers,\n      updateFactoryLocation,\n      submitFactory,\n      navigateToAddLocation,\n      navigateToAddManager,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","useRouter","router","factory","name","location","address","latitude","longitude","openingTime","closingTime","logo","managerId","chocolates","rating","status","locations","selectedLocation","availableManagers","loadLocations","response","get","locationsData","data","value","Object","values","error","console","loadAvailableManagers","filter","manager","assignedFactoryId","updateFactoryLocation","find","loc","locationId","submitFactory","endpoint","post","withCredentials","log","push","message","navigateToAddLocation","navigateToAddManager"],"sources":["C:/Users/PC/eclipse-workspace/apache-tomcat-9.0.89/apache-tomcat-9.0.89/webapps/chocolate-factory-2/Kostur/Frontend/front-app/src/views/AddFactory.vue"],"sourcesContent":["<template>\r\n  <div class=\"d-flex justify-content-center align-items-center vh-100\">\r\n    <div class=\"card p-5 shadow-lg\" style=\"width: 100%; max-width: 700px;\">\r\n      \r\n      <form @submit.prevent=\"submitFactory\" class=\"factory-form\">\r\n        <div class=\"mb-4\">\r\n          <label for=\"factoryName\" class=\"form-label\">Factory Name:</label>\r\n          <input type=\"text\" id=\"factoryName\" v-model=\"factory.name\" name=\"factoryName\" class=\"form-control form-control-lg\" required>\r\n        </div>\r\n        <div class=\"mb-4\">\r\n          <label for=\"factoryLocation\" class=\"form-label\">Location:</label>\r\n          <select id=\"factoryLocation\" v-model=\"selectedLocation\" @change=\"updateFactoryLocation\" class=\"form-select form-select-lg\" required>\r\n            <option v-for=\"location in locations\" :key=\"location.locationId\" :value=\"location.locationId\">\r\n              {{ location.address }}\r\n            </option>\r\n          </select>\r\n          <button @click=\"navigateToAddLocation\" type=\"button\" class=\"btn btn-outline-secondary mt-2\">Add Location</button>\r\n        </div>\r\n        <div class=\"mb-4\">\r\n          <label for=\"manager\" class=\"form-label\">Manager:</label>\r\n          <select id=\"manager\" v-model=\"factory.managerId\" name=\"manager\" class=\"form-select form-select-lg\" required>\r\n            <option v-for=\"manager in availableManagers\" :key=\"manager.id\" :value=\"manager.id\">\r\n              {{ manager.username }}\r\n            </option>\r\n          </select>\r\n          <button v-if=\"availableManagers.length === 0\" @click=\"navigateToAddManager\" type=\"button\" class=\"btn btn-outline-secondary mt-2\">Add Manager</button>\r\n        </div>\r\n        <div class=\"mb-4\">\r\n          <label for=\"openingTime\" class=\"form-label\">Opening Time:</label>\r\n          <input type=\"time\" id=\"openingTime\" v-model=\"factory.openingTime\" name=\"openingTime\" class=\"form-control form-control-lg\" required>\r\n        </div>\r\n        <div class=\"mb-4\">\r\n          <label for=\"closingTime\" class=\"form-label\">Closing Time:</label>\r\n          <input type=\"time\" id=\"closingTime\" v-model=\"factory.closingTime\" name=\"closingTime\" class=\"form-control form-control-lg\" required>\r\n        </div>\r\n        <div class=\"mb-4\">\r\n          <label for=\"logoName\" class=\"form-label\">Logo Name:</label>\r\n          <input type=\"text\" id=\"logoName\" v-model=\"factory.logo\" name=\"logoName\" class=\"form-control form-control-lg\" required>\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-primary w-100 btn-lg\">Create Factory</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\nconst factory = ref({\r\n  name: '',\r\n  location: {\r\n    address: '',\r\n    latitude: null,\r\n    longitude: null\r\n  },\r\n  openingTime: '',\r\n  closingTime: '',\r\n  logo: '',\r\n  managerId: null,\r\n  chocolates: [],\r\n  rating: 0,\r\n  status: 'OPEN'\r\n});\r\n\r\nconst locations = ref([]);\r\nconst selectedLocation = ref(null);\r\nconst availableManagers = ref([]);\r\n\r\nconst loadLocations = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/locations');\r\n    const locationsData = response.data;\r\n    locations.value = Object.values(locationsData);\r\n  } catch (error) {\r\n    console.error('Error loading locations:', error);\r\n    locations.value = [];\r\n  }\r\n};\r\n\r\nconst loadAvailableManagers = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/users/managers');\r\n    availableManagers.value = response.data.filter(manager => !manager.assignedFactoryId || manager.assignedFactoryId === '');\r\n  } catch (error) {\r\n    console.error('Error loading managers:', error);\r\n  }\r\n};\r\n\r\nconst updateFactoryLocation = () => {\r\n  const location = locations.value.find(loc => loc.locationId === selectedLocation.value);\r\n  if (location) {\r\n    factory.value.location = location;\r\n  }\r\n};\r\n\r\nconst submitFactory = async () => {\r\n  try {\r\n    const endpoint = 'http://localhost:8080/WebShopAppREST/rest/chocolateFactoryObjects';\r\n    const response = await axios.post(endpoint, factory.value, { withCredentials: true });\r\n    console.log('Factory created:', response.data);\r\n    router.push('/');\r\n  } catch (error) {\r\n    console.error('Error creating factory:', error.message);\r\n  }\r\n};\r\n\r\nconst navigateToAddLocation = () => {\r\n  router.push('/addlocation');\r\n};\r\n\r\nconst navigateToAddManager = () => {\r\n  router.push('/addmanager');\r\n};\r\n\r\nonMounted(() => {\r\n  loadLocations();\r\n  loadAvailableManagers();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.d-flex {\r\n  min-height: 100vh;\r\n}\r\n\r\n.card {\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 30px;\r\n  background-color: #e7f3ff;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nh2 {\r\n  color: #343a40;\r\n  text-align: center;\r\n  font-size: 2rem;\r\n  font-style: italic;\r\n}\r\n\r\n.form-label {\r\n  font-weight: normal;\r\n  font-size: 1.2rem;\r\n  margin-bottom: 5px;\r\n}\r\n\r\nbutton[type=\"submit\"] {\r\n  margin-top: 20px;\r\n}\r\n\r\ninput[type=\"text\"],\r\ninput[type=\"time\"],\r\nselect,\r\nbutton[type=\"submit\"] {\r\n  border-radius: 4px;\r\n}\r\n\r\ninput[type=\"text\"]:focus,\r\ninput[type=\"time\"]:focus,\r\nselect:focus {\r\n  border-color: #007bff;\r\n  box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);\r\n}\r\n\r\n.mb-4 {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.btn-outline-secondary {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}