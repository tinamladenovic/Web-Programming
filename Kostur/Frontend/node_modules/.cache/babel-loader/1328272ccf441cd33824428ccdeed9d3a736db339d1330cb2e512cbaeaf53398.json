{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3105c428\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"all-factories\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"All Chocolate Factories\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"factory-info\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"factory-details\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.sortedFactories, factory => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: factory.id\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n      src: factory.logo,\n      alt: \"Logo\",\n      class: \"factory-logo\"\n    }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h2\", null, _toDisplayString(factory.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Location: \" + _toDisplayString(factory.location.latitude) + \", \" + _toDisplayString(factory.location.longitude), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Rating: \" + _toDisplayString(factory.rating), 1 /* TEXT */)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_Fragment","_renderList","$setup","sortedFactories","factory","key","id","_hoisted_3","src","logo","alt","_hoisted_4","_hoisted_5","_toDisplayString","name","location","latitude","longitude","rating"],"sources":["C:\\Users\\PC\\eclipse-workspace\\apache-tomcat-9.0.89\\apache-tomcat-9.0.89\\webapps\\chocolate-factory-2\\Kostur\\Frontend\\front-app\\src\\views\\AllFactoryView.vue"],"sourcesContent":["<template>\r\n    <div class=\"all-factories\">\r\n      <h1>All Chocolate Factories</h1>\r\n      <ul>\r\n        <li v-for=\"factory in sortedFactories\" :key=\"factory.id\">\r\n          <div class=\"factory-info\">\r\n            <img :src=\"factory.logo\" alt=\"Logo\" class=\"factory-logo\" />\r\n            <div class=\"factory-details\">\r\n              <h2>{{ factory.name }}</h2>\r\n              <p>Location: {{ factory.location.latitude }}, {{ factory.location.longitude }}</p>\r\n              <p>Rating: {{ factory.rating }}</p>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted, computed } from 'vue';\r\n  import axios from 'axios';\r\n  \r\n  const factories = ref([]);\r\n  \r\n  function loadFactories() {\r\n    axios.get('http://localhost:8080/WebShopAppREST/rest/chocolateFactoryObjects')\r\n      .then(response => {\r\n        factories.value = response.data;\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n  \r\n  onMounted(() => {\r\n    loadFactories();\r\n  });\r\n  \r\n  const isFactoryOpen = (factory) => {\r\n    const currentTime = new Date();\r\n    const openingTime = new Date();\r\n    const closingTime = new Date();\r\n    \r\n    const [openHour, openMinute] = factory.openingTime.split(':');\r\n    const [closeHour, closeMinute] = factory.closingTime.split(':');\r\n  \r\n    openingTime.setHours(openHour, openMinute);\r\n    closingTime.setHours(closeHour, closeMinute);\r\n  \r\n    return currentTime >= openingTime && currentTime <= closingTime;\r\n  };\r\n  \r\n  const sortedFactories = computed(() => {\r\n    return factories.value.sort((a, b) => {\r\n      const aOpen = isFactoryOpen(a);\r\n      const bOpen = isFactoryOpen(b);\r\n      if (aOpen && !bOpen) return -1;\r\n      if (!aOpen && bOpen) return 1;\r\n      return 0;\r\n    });\r\n  });\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .all-factories {\r\n    padding: 20px;\r\n  }\r\n  \r\n  ul {\r\n    list-style-type: none;\r\n    padding: 0;\r\n  }\r\n  \r\n  li {\r\n    margin: 10px 0;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .factory-info {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .factory-logo {\r\n    width: 100px;\r\n    height: 100px;\r\n    margin-right: 20px;\r\n  }\r\n  \r\n  .factory-details {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  </style>\r\n  "],"mappings":";;;EACSA,KAAK,EAAC;AAAe;gEACxBC,mBAAA,CAAgC,YAA5B,yBAAuB;;EAGlBD,KAAK,EAAC;AAAc;mBALnC;;EAOiBA,KAAK,EAAC;AAAiB;;uBANpCE,mBAAA,CAcM,OAdNC,UAcM,GAbJC,UAAgC,EAChCH,mBAAA,CAWK,c,kBAVHC,mBAAA,CASKG,SAAA,QAbbC,WAAA,CAI8BC,MAAA,CAAAC,eAAe,EAA1BC,OAAO;yBAAlBP,mBAAA,CASK;MATmCQ,GAAG,EAAED,OAAO,CAACE;QACnDV,mBAAA,CAOM,OAPNW,UAOM,GANJX,mBAAA,CAA2D;MAArDY,GAAG,EAAEJ,OAAO,CAACK,IAAI;MAAEC,GAAG,EAAC,MAAM;MAACf,KAAK,EAAC;4BANtDgB,UAAA,GAOYf,mBAAA,CAIM,OAJNgB,UAIM,GAHJhB,mBAAA,CAA2B,YAAAiB,gBAAA,CAApBT,OAAO,CAACU,IAAI,kBACnBlB,mBAAA,CAAkF,WAA/E,YAAU,GAAAiB,gBAAA,CAAGT,OAAO,CAACW,QAAQ,CAACC,QAAQ,IAAG,IAAE,GAAAH,gBAAA,CAAGT,OAAO,CAACW,QAAQ,CAACE,SAAS,kBAC3ErB,mBAAA,CAAmC,WAAhC,UAAQ,GAAAiB,gBAAA,CAAGT,OAAO,CAACc,MAAM,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}