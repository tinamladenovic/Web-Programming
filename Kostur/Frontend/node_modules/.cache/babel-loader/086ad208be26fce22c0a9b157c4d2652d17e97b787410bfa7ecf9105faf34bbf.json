{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4af0b479\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Registered Users\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"table\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createCommentVNode(\" Search Input \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n    placeholder: \"Search users...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchQuery]]), _createCommentVNode(\" Table \"), _createElementVNode(\"table\", _hoisted_2, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.sortBy('firstName'))\n  }, \"First Name\"), _createElementVNode(\"th\", {\n    onClick: _cache[2] || (_cache[2] = $event => $setup.sortBy('lastName'))\n  }, \"Last Name\"), _createElementVNode(\"th\", {\n    onClick: _cache[3] || (_cache[3] = $event => $setup.sortBy('username'))\n  }, \"Username\"), _createElementVNode(\"th\", {\n    onClick: _cache[4] || (_cache[4] = $event => $setup.sortBy('earnedPoints'))\n  }, \"Earned Points\")])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredUsers, user => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: user.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(user.firstName), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.lastName), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.username), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.earnedPoints), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["_createElementVNode","class","_createElementBlock","_hoisted_1","_createCommentVNode","type","_cache","$event","$setup","searchQuery","placeholder","_hoisted_2","onClick","sortBy","_Fragment","_renderList","filteredUsers","user","key","id","_toDisplayString","firstName","lastName","username","earnedPoints"],"sources":["C:\\Users\\PC\\eclipse-workspace\\apache-tomcat-9.0.89\\apache-tomcat-9.0.89\\webapps\\chocolate-factory-2\\Kostur\\Frontend\\front-app\\src\\views\\UserTable.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>Registered Users</h2>\r\n\r\n    <!-- Search Input -->\r\n    <input type=\"text\" v-model=\"searchQuery\" placeholder=\"Search users...\">\r\n    \r\n    <!-- Table -->\r\n    <table class=\"table\">\r\n      <thead>\r\n        <tr>\r\n          <th @click=\"sortBy('firstName')\">First Name</th>\r\n          <th @click=\"sortBy('lastName')\">Last Name</th>\r\n          <th @click=\"sortBy('username')\">Username</th>\r\n          <th @click=\"sortBy('earnedPoints')\">Earned Points</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"user in filteredUsers\" :key=\"user.id\">\r\n          <td>{{ user.firstName }}</td>\r\n          <td>{{ user.lastName }}</td>\r\n          <td>{{ user.username }}</td>\r\n          <td>{{ user.earnedPoints }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ref, onMounted, computed } from 'vue';\r\n\r\nexport default {\r\n  setup() {\r\n    const users = ref([]); // Initialize as empty array\r\n\r\n    const searchQuery = ref('');\r\n    const sortByParam = ref(null);\r\n    const sortDirection = ref('asc');\r\n\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/WebShopAppREST/rest/users', {\r\n          withCredentials: true,\r\n        });\r\n        users.value = Object.values(response.data); // Convert response.data to array\r\n        console.log('Fetched users:', users.value); // Log after fetching users\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchUsers();\r\n    });\r\n\r\n    const filteredUsers = computed(() => {\r\n      let filtered = users.value.filter(user => {\r\n        return (\r\n          user.firstName.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\r\n          user.lastName.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\r\n          user.username.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n        );\r\n      });\r\n\r\n      if (sortByParam.value) {\r\n        filtered = filtered.sort((a, b) => {\r\n          const modifier = sortDirection.value === 'asc' ? 1 : -1;\r\n          return modifier * (a[sortByParam.value] > b[sortByParam.value] ? 1 : -1);\r\n        });\r\n      }\r\n\r\n      return filtered;\r\n    });\r\n\r\n    const sortBy = (param) => {\r\n      if (param === sortByParam.value) {\r\n        sortDirection.value = sortDirection.value === 'asc' ? 'desc' : 'asc';\r\n      } else {\r\n        sortByParam.value = param;\r\n        sortDirection.value = 'asc';\r\n      }\r\n    };\r\n\r\n    return {\r\n      users,\r\n      searchQuery,\r\n      filteredUsers,\r\n      sortBy,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table th, .table td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.table th {\r\n  background-color: #f2f2f2;\r\n  text-align: left;\r\n}\r\n</style>\r\n"],"mappings":";;gEAEIA,mBAAA,CAAyB,YAArB,kBAAgB;;EAMbC,KAAK,EAAC;AAAO;;uBAPtBC,mBAAA,CAyBM,cAxBJC,UAAyB,EAEzBC,mBAAA,kBAAqB,E,gBACrBJ,mBAAA,CAAuE;IAAhEK,IAAI,EAAC,MAAM;IALtB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKgCC,MAAA,CAAAC,WAAW,GAAAF,MAAA;IAAEG,WAAW,EAAC;iDAAzBF,MAAA,CAAAC,WAAW,E,GAEvCL,mBAAA,WAAc,EACdJ,mBAAA,CAiBQ,SAjBRW,UAiBQ,GAhBNX,mBAAA,CAOQ,gBANNA,mBAAA,CAKK,aAJHA,mBAAA,CAAgD;IAA3CY,OAAK,EAAAN,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAK,MAAM;KAAe,YAAU,GAC3Cb,mBAAA,CAA8C;IAAzCY,OAAK,EAAAN,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAK,MAAM;KAAc,WAAS,GACzCb,mBAAA,CAA6C;IAAxCY,OAAK,EAAAN,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAK,MAAM;KAAc,UAAQ,GACxCb,mBAAA,CAAsD;IAAjDY,OAAK,EAAAN,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAK,MAAM;KAAkB,eAAa,E,KAGrDb,mBAAA,CAOQ,iB,kBANNE,mBAAA,CAKKY,SAAA,QAvBbC,WAAA,CAkB2BP,MAAA,CAAAQ,aAAa,EAArBC,IAAI;yBAAff,mBAAA,CAKK;MAL8BgB,GAAG,EAAED,IAAI,CAACE;QAC3CnB,mBAAA,CAA6B,YAAAoB,gBAAA,CAAtBH,IAAI,CAACI,SAAS,kBACrBrB,mBAAA,CAA4B,YAAAoB,gBAAA,CAArBH,IAAI,CAACK,QAAQ,kBACpBtB,mBAAA,CAA4B,YAAAoB,gBAAA,CAArBH,IAAI,CAACM,QAAQ,kBACpBvB,mBAAA,CAAgC,YAAAoB,gBAAA,CAAzBH,IAAI,CAACO,YAAY,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}